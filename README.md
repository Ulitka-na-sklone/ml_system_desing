# Дизайн ML системы - Система идентификации личности по фотографии

## 1. Цели и предпосылки

### 1.1. Зачем идем в разработку продукта?

**Бизнес-цель**

Создать автоматизированную систему идентификации личности по фотографии для замены традиционных методов (пропусков, паролей, отпечатков пальцев) в сценариях контроля доступа на промышленном предприятии.

**Улучшения**

- ускорение обработки потока сотрудников
- масштабируемость (при увеличении количества сотрудников система легко адаптируется без увеличения штата охраны)
- экономия на лишних сотрудниках охраны
- повышенная точность, чем у человека
- повышение качества жизни сотрудников

**Критерии успеха с точки зрения бизнеса**

- увеличение скорости прохода сотрудников во время часа пик
- избавление от расходов на пластиковые пропуски
- False Acceptance Rate (FAR) < 0.1% (чужой не проходит)
- False Rejection Rate (FRR) < 1% (свой не блокируется)
- положительный отклик сотрудников

### 1.2. Бизнес-требования и ограничения

**Краткое описание бизнес-требований**

- Реализация системы биометрической идентификации на базе компьютерного зрения
- Интеграция с существующей СКУД предприятия
- Обеспечение работы системы в режиме 24/7 с uptime > 99.9%
- Поддержка распознавания при различных условиях освещения и ракурсах
- Ведение журнала событий доступа с возможностью аудита

**Бизнес-ограничения**

- бюджет (7млн руб)
- сроки (4 месяца)
- конфиденциальность личной информации, которая храниться в системе

**Ожидания от конкретной итерации (от пилота)**

Необходимо реализовать полный функционал системы на одной проходной с более мягкими требованиями к возможностям ошибки системы

**Описание бизнес-процесса пилота, насколько это возможно**

Текст

**Критерии успеха пилота и возможные пути развития проекта**

- увеличение скорости прохода сотрудников во время часа пик
- False Acceptance Rate (FAR) < 0.5% (чужой не проходит)
- False Rejection Rate (FRR) < 5% (свой не блокируется)

//При успехе пилота проект признается рентабельным и продолжается работа над его дальнейшим внедрением

### 1.3. Предпосылки решения

**Данные:**

- фотографии сотрудников (3 фото на человека, разрешение ≥ 256×256 px)
- негативные примеры фотографий (с бликами, с попытками обмана системы)

**Критические допущения:**

- модель предполагает, что лицо человека не меняется
- Дообучение 1 раз в 6 месяца (для учета изменений лиц)

## 2. Методология

### 2.1. Постановка задачи

Создание системы распознавания лиц и внедрение ее

### 2.2. Блок-схема решения

Ссылка_на_схему

## 3. Оценка и подготовка пилота

### 3.1. Способ оценки пилота

Оценка пилота будет комбинированной:

**Количественная оценка** *(Data Scientist, Product Owner)*
-   **Метод:** A/B тестирование (с контрольной группой, если возможно) или Before/After анализ на пилотной проходной.
-   **Метрики:**
    -   False Acceptance Rate (FAR) – анализ логов, жалоб.
    -   False Rejection Rate (FRR) – анализ логов, жалоб.
    -   Скорость прохода сотрудников.
    -   Пропускная способность проходной.
    -   Время отклика системы.
    -   Uptime системы.

**Качественная оценка** *(Product Owner, HR)*
-   **Методы:**
    -   Анкетирование и интервью с сотрудниками, участвующими в пилоте.
    -   Наблюдение за работой охраны и сбор их обратной связи.
    
-   **Оценка:**
    -   Удобство использования системы сотрудниками.
    -   Восприятие безопасности и приватности.
    -   Простота освоения и использования системы охраной.

**Дизайн эксперимент:**
-   **Выборка:** Репрезентативная группа сотрудников из 300 человек, регулярно использующих пилотную проходную.
-   **Длительность:** 2-4 недели для сбора достаточного количества данных и адаптации пользователей.
-   **Процедура:** Четкие инструкции для всех участников, определены каналы для обратной связи.

### 3.2. Что считаем успешным пилотом

Пилот считается успешным при достижении следующих критериев:

-   **Метрики модели:**
    -   False Acceptance Rate (FAR) ≤ 0.5% 
    -   False Rejection Rate (FRR) ≤ 5%
      
-   **Улучшение бизнес-процессов:**
    -   Увеличение скорости прохода сотрудников (на 15-20% быстрее или как минимум не хуже существующей системы), особенно в часы пик.
      
-   **Стабильность и надежность системы:**
    -   Uptime системы ≥ 99.9% в течение пилотного периода.
      
-   **Принятие пользователями:**
    -   Положительный отклик от ≥ 70% опрошенных сотрудников.
    -   Удовлетворенность сотрудников охраны простотой использования и эффективностью системы.
      
-   **Экономическая целесообразность (предварительная оценка):**
    -   Подтверждение потенциала для достижения долгосрочных бизнес-целей (экономия на пропусках, оптимизация охраны).
    -   Стоимость эксплуатации пилотной системы соответствует ожиданиям.

### 3.3. Подготовка пилота

**Оценка вычислительных затрат и ограничения**

-   **Расчет на бейзлайне (по результатам Этапа 1):**
    -   Проводится оценка времени инференса модели на одном изображении.
    -   Оценивается потребление ресурсов (RAM, CPU/GPU).
    -   Формируется предварительный расчет требуемой производительности сервера для одной проходной.
      
-   **Работа с MVP моделью (по результатам Этапа 2):**
    -   Проводятся точные замеры производительности MVP модели на целевом оборудовании для пилота.
    -   Анализируется необходимость и возможность применения техник оптимизации (квантование, TensorRT и т.п.) для достижения требуемой скорости без значительной потери точности.
    -   Определяется максимальное допустимое время отклика системы (например, не более 1-2 секунд на сотрудника).

**Что можем позволить себе (исходя из ожидаемых затрат на вычисления для пилота):**

-   **Бюджет на оборудование:** Ограничения бюджета могут повлиять на выбор сложности модели. Возможные компромиссы:
    -   Использование более легковесных архитектур.
    -   Интенсивное применение методов оптимизации.
    -   Рассмотрение CPU-обработки, если производительность достаточна.
      
-   **Частота обработки кадров:** Для снижения нагрузки возможна обработка не каждого кадра, а, например, каждого N-го, или активация по детектору движения.

**Установка ограничений по вычислительной сложности для модели пилота:**

-   **Максимальное время инференса на запрос:** (например, < 0.5 секунды на целевом GPU, < 1.5 секунды на целевом CPU).
-   **Максимальное потребление RAM/VRAM:** Модель должна помещаться на доступное оборудование.
-   Если установленные ограничения не позволяют достичь целевых метрик FAR/FRR, это фиксируется как риск. Потребуется либо пересмотр требований к оборудованию, либо дальнейшая оптимизация модели, либо корректировка ожиданий от пилота.
